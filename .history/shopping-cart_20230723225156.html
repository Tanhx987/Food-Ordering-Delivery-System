<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>DD Food || Shopping Cart</title>
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/revolution-slider.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="css/font-awesome.css" rel="stylesheet">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link href="css/responsive.css" rel="stylesheet">
<style>
    .cart-total {
      font-size: 18px;
      font-weight: bold;
      color: #000;
    }
    .invalid-coupon {
            color: red;
            font-weight: bold;
        }

        .used-coupon {
            color: orange;
            font-weight: bold;
        }
  </style>
</head>

<body>

<div class="page-wrapper">
 	
    <div class="preloader"></div>
 	
    <header class="main-header">
    	<div class="header-top">
        	<div class="auto-container">
            	<div class="clearfix">
                    
                    <div class="top-left">
                        <div class="social-icon">
                        	<a href="https://www.facebook.com/campaign/landing.php?campaign_id=1742551639&extra_1=s%7Cc%7C339370934041%7Ce%7Cfacebook%27%7C&placement=&creative=339370934041&keyword=facebook%27&partner_id=googlesem&extra_2=campaignid%3D1742551639%26adgroupid%3D72230628630%26matchtype%3De%26network%3Dg%26source%3Dnotmobile%26search_or_content%3Ds%26device%3Dc%26devicemodel%3D%26adposition%3D%26target%3D%26targetid%3Dkwd-362360550869%26loc_physical_ms%3D1010274%26loc_interest_ms%3D%26feeditemid%3D%26param1%3D%26param2%3D&gclid=EAIaIQobChMI9umNldPQ_wIVupNmAh3yNAHHEAAYASAAEgKKmPD_BwE"><span class="fa fa-facebook"></span></a>
                            <a href="https://twitter.com/i/flow/login?input_flow_data=%7B%22requested_variant%22%3A%22eyJsYW5nIjoiemgifQ%3D%3D%22%7D"><span class="fa fa-twitter"></span></a>
                            
                        </div>
                        
                    	<ul class="clearfix">
                        	<li>Call for Special Order: +60123456789</li>
                        </ul>
                    </div>
                    
                    <div class="top-right">
                    
                    	<ul>
                            <li class="eng-dropdown dropdown"><a class="btn btn-default dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" href="#"><span class="icon"></span> Account <span class="arow-icon fa fa-angle-down"></span></a>
                                <ul class="dropdown-menu style-one" aria-labelledby="dropdownMenu1">
                                    <li><a href="Login.php">Login</a></li>
                                    <li><a href="Register.php">Register</a></li>
                                   
                                </ul>
                            </li>
                            <li class="cart-btn"><a href="shopping-cart.html"><i class="fa fa-shopping-cart" aria-hidden="true"></i>
<span class="count">1</span></a></li>
                        </ul>
                        
                    </div>
                    
                </div>
                
            </div>
        </div>
        
    	<div class="main-box">
        	<div class="auto-container">
            	<div class="outer-container clearfix">
                    <div class="logo-box">
                        <div class="logo"><a href="index.html"><img src="images/DD Food Logo 4.png" 
                        alt="Artica"></a></div>
                    </div>
                    
                    <div class="nav-outer clearfix">
                        <nav class="main-menu">
                            <div class="navbar-header">  	
                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                </button>
                            </div>
                                <div class="navbar-collapse collapse clearfix">
                                    <ul class="navigation clearfix">
                                        <ul class="navigation clearfix">
                                            <li><a href="index.html">Home</a></li>
                                            <li><a href="about.html">AboutUs</a></li>
                                             <li><a href="food.html">Food</a></li>
                                                    <li><a href="shopping-cart.html">Shopping Cart</a></li>
                                                    <li><a href="Login.php">Login/Register</a></li>
                                        </ul>
                                    </li>
                                 </ul>
                            </div>
                        </nav>

                    </div>
                   
                    
                    <div class="nav-toggler">
                    	<button class="hidden-bar-opener"><span class="icon fa fa-bars"></span></button>
                    </div>

            	</div>    
            </div>
        </div>
    
    </header>
    
    <section class="hidden-bar right-align">
        
        <div class="hidden-bar-closer">
            <button class="btn"><i class="fa fa-close"></i></button>
        </div>
        
        <div class="hidden-bar-wrapper">
        
            <div class="logo text-center">
                <a href="index.html"><img src="images/DD Food Logo 4.png"
                        alt="Artica"></a>		
            </div>
            
            <div class="side-menu">
                <ul class="navigation clearfix">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">AboutUs</a></li>
                     <li><a href="food.html">Food</a></li>
                            <li><a href="shopping-cart.html">Shopping Cart</a></li>
                            <li><a href="Login.php">Login/Register</a></li>
                 </ul>
            </div>
        
            <div class="social-icons">
                <ul>
                    <li><a href="https://www.facebook.com/campaign/landing.php?campaign_id=1742551639&extra_1=s%7Cc%7C339370934041%7Ce%7Cfacebook%27%7C&placement=&creative=339370934041&keyword=facebook%27&partner_id=googlesem&extra_2=campaignid%3D1742551639%26adgroupid%3D72230628630%26matchtype%3De%26network%3Dg%26source%3Dnotmobile%26search_or_content%3Ds%26device%3Dc%26devicemodel%3D%26adposition%3D%26target%3D%26targetid%3Dkwd-362360550869%26loc_physical_ms%3D1010274%26loc_interest_ms%3D%26feeditemid%3D%26param1%3D%26param2%3D&gclid=EAIaIQobChMI9umNldPQ_wIVupNmAh3yNAHHEAAYASAAEgKKmPD_BwE"><i class="fa fa-facebook"></i></a></li>
                    <li><a href="https://twitter.com/i/flow/login?input_flow_data=%7B%22requested_variant%22%3A%22eyJsYW5nIjoiemgifQ%3D%3D%22%7D"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://accounts.google.com/v3/signin/identifier?dsh=S1426733690%3A1687229349870682&continue=https%3A%2F%2Faccounts.google.com%2F&followup=https%3A%2F%2Faccounts.google.com%2F&ifkv=Af_xneEU3cWq8NHQuV4qFGc-PO-hUDJojJdWamvLRfTkHl7uyvB1icU5OxV4fNbEZx-qCA9QHO8hvw&passive=1209600&flowName=GlifWebSignIn&flowEntry=ServiceLogin"><i class="fa fa-google"></i></a></li>
                </ul>
            </div>
        
        </div>
    </section>
    
    <section class="page-title" style="background-image:url(images/background/10.jpg);">
    	<div class="auto-container">
        <h3>Cart Page</h3>
        </div>
    </section>
    
<section class="cart-section">
    <div class="auto-container">
        <div class="cart-outer">
            <div class="table-outer">
                <table class="cart-table">
                    <thead class="cart-header">
                        <tr>
                            <th class="prod-column" colspan="">PRODUCT</th>
                            <th class="price">Price</th>
                            <th>QUANTITY</th>
                            <th>Total</th>
                            <th><span class="fa fa-trash-o"></span></th>
                        </tr>
                    </thead>
                    <tbody id="cart-items"></tbody>
                </table>
                <div class="clearfix">
                    <div class="column pull-left col-md-4 col-sm-6 col-xs-12">
                        <div class="cart-options clearfix">
                            <div class="apply-coupon clearfix">
                                <h4>Voucher</h4>
                                <div class="form-group clearfix">
                                    <input type="text" name="coupon-code" value="" placeholder="Coupon Code">
                                    <button type="button" class="theme-btn btn-style-one" onclick="applyCoupon()">Use</button>
                                    <p id="coupon-error" style="display: none; color: red;">Invalid Voucher</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column pull-right col-md-8 col-sm-12 col-xs-12">
                        <div class="price-calculator">
                            <div class="outer-box">
                                <div class="cart-totals">
                                    <ul class="lower-total">
                                        <ul class="totals-table">
                                            <li class="clearfix voucher-section" style="display: none; text-align: right;"></li> 
                                            <li class="clearfix">
                                                <span class="col bold-text">SubTotal</span>
                                                <span class="col total-amount"></span>
                                                <button type="submit" class="theme-btn btn-style-one" onclick="goToCheckout()">Checkout</button>
                                            </li>
                                        </ul>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="main-footer">
    <div class="auto-container">
        <div class="widgets-section">
            <div class="row clearfix">
                <div class="big-column col-md-6 col-sm-12 col-xs-12">
                    <div class="row clearfix">
                        <div class="footer-column col-md-7 col-sm-7 col-xs-12">
                            <div class="footer-widget about-widget">
                                <div class="footer-logo">
                                    <figure><a href="index.html"><img src="images/DD Food Logo 4 black.jpg" alt=""></a></figure>
                                </div>
                                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.389126123662!2d103.67967351475427!3d1.5336266988815872!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da73c109632e0b%3A0x74cda51bf210c304!2sSouthern%20University%20College!5e0!3m2!1sen!2smy!4v1690106600549!5m2!1sen!2smy"  width="300" height="200" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                                        
                                        <ul class="contact-info">
                                            <li><i class="fa fa-map-marker" aria-hidden="true"></i>
                                                Address :<br> PTD 64888, Jalan Selatan Utama,<br>KM 15, Off, Skudai Lbh,<br> 81300 Skudai, Johor.</li>
                                    <li><i class="fa fa-phone" aria-hidden="true"></i>
                                        Phone: +601123456789</li>
                                    <li><i class="fa fa-envelope" aria-hidden="true"></i>
                                        Email: ABCDEFG@gmail.com</li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-column col-md-5 col-sm-5 col-xs-12">
                            <div class="footer-widget links-widget">
                                <h2>useful links</h2>
                                <div class="widget-content">
                                    <ul class="list">
                                        <li><a href="about.html">About Us</a></li>
                                        <li><a href="food.html">Food</a></li>
                                        <li><a href="shopping-cart.html">Shopping Cart</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="big-column col-md-6 col-sm-12 col-xs-12">
                    <div class="row clearfix">
                        <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                            <div class="footer-widget posts-widget">
                                <h2>Follow Us</h2>
                                <div class="widget-content">
                                    <div class="posts">
                                        <div class="post">
                                            <figure class="post-thumb"><img src="images/facebook.png" alt=""><a href="https://www.facebook.com/pages/create/?ref_type=registration_form" class="overlay-link"><span class="fa fa-link"></span></a></figure>
                                            <div class="desc-text"><a href="https://www.facebook.com/pages/create/?ref_type=registration_form">Facebook</a></div>
                                        </div>
                                        <div class="post">
                                            <figure class="post-thumb"><img src="images/png-transparent-social-media-instagram-login-graphy-ig-instagram-icon-rectangle-magenta-mobile-phones-thumbnail.png" alt=""><a href="https://www.instagram.com/" class="overlay-link"><span class="fa fa-link"></span></a></figure>
                                            <div class="desc-text"><a href="https://www.instagram.com/">Instagram</a></div>
                                        </div>
                                        <div class="post">
                                            <figure class="post-thumb"><img src="images/twitter.png" alt=""><a href="https://twitter.com/i/flow/login?input_flow_data=%7B%22requested_variant%22%3A%22eyJsYW5nIjoiemgifQ%3D%3D%22%7D" class="overlay-link"><span class="fa fa-link"></span></a></figure>
                                            <div class="desc-text"><a href="https://twitter.com/i/flow/login?input_flow_data=%7B%22requested_variant%22%3A%22eyJsYW5nIjoiemgifQ%3D%3D%22%7D">Twitter</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                            <div class="footer-widget opening-widget">
                                <h2>Payment Options</h2>
                                <div class="widget-content">
                                    <ul>
                                        <li><a href="checkout.html"> <img src="images/cod.png" alt="Cash On Delivery"></a></li>
                                        <li><a href="checkout.html"> <img src="images/PayPal_Logo_2007.png" alt="Paypal"></a></li>
                                        <li><a href="checkout.html"> <img src="images/mastercard.png" alt="Mastercard"></a></li>
                                        <li><a href="checkout.html"> <img src="images/Visa_Logo_2005.png" alt="Visa"></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

        <footer-bottom>
         <div class="footer-bottom" style="background-color: black;">
            <div class="container" style="text-align: center;">
               <div class="copyright-text" style="color: white;">Copyright &copy; 2023. All Rights Reserved </div>
           </div>
   </footer-bottom>
   
<div class="scroll-to-top scroll-to-target" data-target="html"><span class="fa fa-long-arrow-up"></span></div>

<script src="appscopy.js"></script>
<script src="js/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script>
<script src="js/revolution.min.js"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/jquery.fancybox-media.js"></script>
<script src="js/owl.js"></script>
<script src="js/wow.js"></script>
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/script.js"></script>
<script src="js/calculate.js"></script>

<script>
 var voucherUsed = false;
 var usedVouchers = [];
 
 function updateCartItem(index, quantity) {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
 
     cartItems[index].quantity = quantity;
 
     cartItems[index].total = cartItems[index].price * quantity;
 
     localStorage.setItem('cartItems', JSON.stringify(cartItems));
 
     renderCartItems();
 
     updateCartTotal();
 }
 
 function increaseQuantity(index) {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     var quantity = cartItems[index].quantity + 1;
     updateCartItem(index, quantity);
 }
 
 function decreaseQuantity(index) {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     var quantity = cartItems[index].quantity - 1;
     if (quantity >= 0) {
         updateCartItem(index, quantity);
     }
 }
 
 function removeCartItem(index) {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     cartItems.splice(index, 1);
     localStorage.setItem('cartItems', JSON.stringify(cartItems));
     renderCartItems();
 
     updateCartTotal();
 }
 
 function renderCartItems() {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     var cartTableBody = document.getElementById('cart-items');
     cartTableBody.innerHTML = '';
 
     if (cartItems && cartItems.length > 0) {
         for (var i = 0; i < cartItems.length; i++) {
             var item = cartItems[i];
             var row = document.createElement('tr');
 
             var nameColumn = document.createElement('td');
             nameColumn.className = 'prod-column';
             nameColumn.textContent = item.name;
             row.appendChild(nameColumn);
 
             var priceColumn = document.createElement('td');
             priceColumn.textContent = item.price;
             row.appendChild(priceColumn);
 
             var quantityColumn = document.createElement('td');
             var quantityInput = document.createElement('input');
             quantityInput.type = 'number';
             quantityInput.min = 0;
             quantityInput.value = item.quantity;
             quantityInput.onchange = (function (index) {
                 return function () {
                     updateCartItem(index, parseInt(this.value));
                 };
             })(i);
             quantityColumn.appendChild(quantityInput);
             row.appendChild(quantityColumn);
 
             var totalColumn = document.createElement('td');
             totalColumn.textContent = item.total;
             row.appendChild(totalColumn);
 
             var deleteColumn = document.createElement('td');
             var deleteButton = document.createElement('button');
             deleteButton.className = 'fa fa-trash-o';
             deleteButton.onclick = (function (index) {
                 return function () {
                     removeCartItem(index);
                 };
             })(i);
             deleteColumn.appendChild(deleteButton);
             row.appendChild(deleteColumn);
 
             cartTableBody.appendChild(row);
         }
     }
 
     updateCartTotal();
 }
 
 function updateCartTotal() {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     var cartTotal = 0;
 
     if (cartItems && cartItems.length > 0) {
         for (var i = 0; i < cartItems.length; i++) {
             var item = cartItems[i];
             cartTotal += item.total;
         }
     }
 
     var subtotalElement = document.querySelector('.lower-total .total-amount');
     var voucherSection = document.querySelector('.voucher-section');
 
     if (voucherUsed) {
         var discount = calculateDiscount();
         var subtotal = cartTotal; 
 
         if (voucherSection) {
             voucherSection.style.display = 'block'; 
             voucherSection.textContent = 'Voucher -RM ' + discount.toFixed(2);
         } else {
             voucherSection = document.createElement('li');
             voucherSection.textContent = 'Voucher -RM ' + discount.toFixed(2);
             voucherSection.classList.add('voucher-section');
             voucherSection.style.textAlign = 'right'; 
             var totalsTable = document.querySelector('.totals-table');
             totalsTable.insertBefore(voucherSection, subtotalElement.parentNode);
         }
 
         var discountedTotal = subtotal - discount;
         subtotalElement.textContent = 'RM ' + discountedTotal.toFixed(2);
     } else {
         subtotalElement.textContent = 'RM ' + cartTotal.toFixed(2); 
     }
 }
 
 function applyCoupon() {
     var couponInput = document.querySelector('input[name="coupon-code"]');
     var couponCode = couponInput.value;
 
     var validCouponCodes = ['KFC8YAM', 'DISCOUNT50', 'SAVE10'];
 
     if (usedVouchers.includes(couponCode)) {
         alert('This voucher has been used');
     } else if (validCouponCodes.includes(couponCode)) {
         voucherUsed = true;
         usedVouchers.push(couponCode);
         couponInput.value = '';
         document.getElementById('coupon-error').style.display = 'none';
 
         var cartItems = JSON.parse(localStorage.getItem('cartItems'));
         for (var i = 0; i < cartItems.length; i++) {
             var item = cartItems[i];
             item.total = item.price * item.quantity;
         }
         localStorage.setItem('cartItems', JSON.stringify(cartItems));
         renderCartItems();
 
         updateCartTotal();
     } else {
         document.getElementById('coupon-error').style.display = 'block';
     }
 }
 
 function calculateDiscount() {
     var cartItems = JSON.parse(localStorage.getItem('cartItems'));
     var cartTotal = 0;
 
     if (cartItems && cartItems.length > 0) {
         for (var i = 0; i < cartItems.length; i++) {
             var item = cartItems[i];
             cartTotal += item.total;
         }
     }
 
     var discount = 0;
     var couponCode = usedVouchers[usedVouchers.length - 1];
 
     switch (couponCode) {
         case 'DISCOUNT50':
             discount = cartTotal * 0.5;
             break;
         case 'SAVE10':
             discount = cartTotal * 0.1;
             break;
     }
 
     return discount;
 }
 
 window.onload = function () {
     renderCartItems();
 };
 
 function goToCheckout() {
    var subtotal = document.querySelector('.lower-total .total-amount').textContent;
    var discount = calculateDiscount();

    window.location.href = "checkout.html?subtotal=" + subtotal + "&discount=" + discount.toFixed(2);
}
</script>
</body>
</html>